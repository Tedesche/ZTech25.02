<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZTech Pro - Sistema de GestÃ£o Empresarial</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
	<meta name="_csrf" th:content="${_csrf.token}"/>
	<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <style>
        /* CSS BÃ¡sico para funcionar */
       
        .error { color: #D8000C; background-color: #FFBABA; border: 1px solid #D8000C; padding: 10px; border-radius: 4px; margin-top: 1rem; }
    </style>
    <script>
	       // Theme Toggle Functionality
	       let isDarkTheme = false;

	       function toggleTheme() {
	           const body = document.body;
	           const themeIcon = document.getElementById('themeIcon');
	           const themeText = document.getElementById('themeText');

	           isDarkTheme = !isDarkTheme;

	           if (isDarkTheme) {
	               body.classList.add('dark-theme');
	               themeIcon.textContent = 'â˜€ï¸';
	               themeText.textContent = 'Tema Claro';
	           } else {
	               body.classList.remove('dark-theme');
	               themeIcon.textContent = 'ðŸŒ™';
	               themeText.textContent = 'Tema Escuro';
	           }

	           // Save theme preference
	           localStorage.setItem('theme', isDarkTheme ? 'dark' : 'light');
	       }

	       // Load saved theme
	       function loadTheme() {
	           const savedTheme = localStorage.getItem('theme');
	           if (savedTheme === 'dark') {
	               toggleTheme();
	           }
	       }
	       function updateModalHeaders() {
	           const modalHeaders = document.querySelectorAll('.modal-content h2');
	           modalHeaders.forEach(header => {
	               if (isDarkTheme) {
	                   header.style.color = 'var(--text-primary-dark)';
	               } else {
	                   header.style.color = 'var(--text-primary-light)';
	               }
	           });
	       }

	       // Listen for theme changes to update modal headers
	       document.body.addEventListener('transitionend', function (e) {
	           if (e.target === document.body) {
	               updateModalHeaders();
	           }
	       });
	       
	       </script>
</head>
<body>

				<div class="caixa-botoes" style="justify-content: flex-end;">
	                <div class="theme-toggle" onclick="toggleTheme()">
	                    <div class="theme-icon" id="themeIcon">ðŸŒ™</div>
	                    <div class="theme-text" id="themeText">Tema Escuro</div>
	                </div>
                    
                    <a th:href="@{/logout}" class="theme-toggle-link">
					  <div class="theme-toggle">
					    <div class="theme-icon" id="logoutIcon">ðŸšª</div>
					    <div class="theme-text" id="logoutText">Sair</div>
					  </div>
					</a>
				</div>

    <div class="modal-content" style="position: absolute; top:29%; left:37%;">
		<h2 style="margin-bottom: 25px; text-align: center;">AutenticaÃ§Ã£o em dois fatores</h2>
			            <div class="form-group">
							<p style="text-align:center; margin-bottom: 15px;">Um cÃ³digo foi enviado para o email cadastrado. Por favor, digite-o no campo.</p>

        <div th:if="${param.error}" class="error">
            CÃ³digo invÃ¡lido ou expirado. Tente novamente.
        </div>

        <form th:action="@{/verificar-otp}" method="post" class="form-group">
            <div class="form-group">
                <label for="otp">CÃ³digo de VerificaÃ§Ã£o</label>
                <input type="text" id="otp" name="otp" maxlength="6" class="action-btn verifica" required autofocus 
                       pattern="\d{6}" title="O cÃ³digo deve ter 6 nÃºmeros."/>
            </div>
            <button class="action-btn btn-primary" type="submit">Verificar</button>
        </form>
    </div>
    </div>
<script th:src="@{/script/script.js}"></script>
</body>
</html>